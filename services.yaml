# Dynamic Config - Servizi

set_config:
  name: Imposta Configurazione Standard
  description: Imposta una configurazione standard con priorità opzionale
  fields:
    entity_id:
      name: Entità
      description: Entità sensor.mia_config_* dell'istanza da utilizzare (opzionale, usa l'istanza di default se non specificato)
      required: false
      example: "sensor.mia_config_temperatura_target"
      selector:
        entity:
          integration: mia_config
    setup_name:
      name: Nome Configurazione
      description: Nome univoco della configurazione
      required: true
      example: "temperatura_target"
      selector:
        text:
    setup_value:
      name: Valore
      description: Valore da assegnare alla configurazione
      required: true
      example: "22"
      selector:
        text:
    priority:
      name: Priorità
      description: Livello di priorità (più basso = maggiore priorità)
      required: false
      default: 99
      example: 10
      selector:
        number:
          min: 1
          max: 999
          mode: box
    description:
      name: Descrizione
      description: Descrizione opzionale della configurazione
      required: false
      example: "Temperatura normale giorno"
      selector:
        text:

update_standard_config:
  name: Aggiorna Configurazione Standard
  description: Aggiorna una configurazione standard esistente (valore, priorità e descrizione)
  fields:
    entity_id:
      name: Entità
      description: Entità sensor.mia_config_* dell'istanza da utilizzare (opzionale, usa l'istanza di default se non specificato)
      required: false
      example: "sensor.mia_config_temperatura_target"
      selector:
        entity:
          integration: mia_config
    config_id:
      name: ID Configurazione
      description: ID della configurazione da aggiornare
      required: true
      example: 1
      selector:
        number:
          min: 1
          mode: box
    setup_value:
      name: Valore
      description: Nuovo valore da assegnare
      required: true
      example: "22"
      selector:
        text:
    priority:
      name: Priorità
      description: Nuovo livello di priorità (più basso = maggiore priorità)
      required: true
      example: 10
      selector:
        number:
          min: 1
          max: 999
          mode: box
    description:
      name: Descrizione
      description: Nuova descrizione opzionale
      required: false
      example: "Temperatura aggiornata"
      selector:
        text:

set_time_config:
  name: Imposta Configurazione a Tempo
  description: Imposta una configurazione valida in un intervallo di date
  fields:
    entity_id:
      name: Entità
      description: Entità sensor.mia_config_* dell'istanza da utilizzare (opzionale, usa l'istanza di default se non specificato)
      required: false
      example: "sensor.mia_config_temperatura_target"
      selector:
        entity:
          integration: mia_config
    setup_name:
      name: Nome Configurazione
      description: Nome della configurazione
      required: true
      example: "temperatura_target"
      selector:
        text:
    setup_value:
      name: Valore
      description: Valore da assegnare alla configurazione
      required: true
      example: "18"
      selector:
        text:
    valid_from:
      name: Valido Da
      description: Data e ora di inizio validità
      required: true
      example: "2025-12-01 00:00:00"
      selector:
        datetime:
    valid_to:
      name: Valido Fino
      description: Data e ora di fine validità
      required: true
      example: "2025-12-31 23:59:59"
      selector:
        datetime:
    priority:
      name: Priorità
      description: Livello di priorità (più basso = maggiore priorità, 1 massima)
      required: false
      default: 99
      example: 10
      selector:
        number:
          min: 1
          max: 999
          mode: box
    valid_from_ora:
      name: Ora Inizio (opzionale)
      description: Ora di inizio validità giornaliera (es. 8.30 per 08:30)
      required: false
      example: 8.00
      selector:
        number:
          min: 0
          max: 23.59
          step: 0.01
          mode: box
    valid_to_ora:
      name: Ora Fine (opzionale)
      description: Ora di fine validità giornaliera (es. 22.30 per 22:30)
      required: false
      example: 22.00
      selector:
        number:
          min: 0
          max: 23.59
          step: 0.01
          mode: box
    days_of_week:
      name: Giorni della Settimana (opzionale)
      description: Giorni validi (0=Lun, 6=Dom), es. "0,1,2,3,4" per Lun-Ven
      required: false
      example: "0,1,2,3,4"
      selector:
        text:

set_schedule_config:
  name: Imposta Configurazione a Orario
  description: Imposta una configurazione valida in una fascia oraria giornaliera
  fields:
    entity_id:
      name: Entità
      description: Entità sensor.mia_config_* dell'istanza da utilizzare (opzionale, usa l'istanza di default se non specificato)
      required: false
      example: "sensor.mia_config_temperatura_target"
      selector:
        entity:
          integration: mia_config
    setup_name:
      name: Nome Configurazione
      description: Nome della configurazione
      required: true
      example: "temperatura_target"
      selector:
        text:
    setup_value:
      name: Valore
      description: Valore da assegnare alla configurazione
      required: true
      example: "20"
      selector:
        text:
    valid_from_ora:
      name: Ora Inizio
      description: Orario di inizio in formato HH.MM (es. 8.30 per 08:30)
      required: true
      example: 8.30
      selector:
        number:
          min: 0
          max: 23.59
          step: 0.01
          mode: box
    valid_to_ora:
      name: Ora Fine
      description: Orario di fine in formato HH.MM (es. 18.00 per 18:00)
      required: true
      example: 18.00
      selector:
        number:
          min: 0
          max: 23.59
          step: 0.01
          mode: box
    days_of_week:
      name: Giorni della Settimana
      description: Giorni di validità (0=Lunedì, 6=Domenica)
      required: false
      default: "0,1,2,3,4,5,6"
      example: "0,1,2,3,4"
      selector:
        select:
          multiple: true
          options:
            - label: "Lunedì"
              value: "0"
            - label: "Martedì"
              value: "1"
            - label: "Mercoledì"
              value: "2"
            - label: "Giovedì"
              value: "3"
            - label: "Venerdì"
              value: "4"
            - label: "Sabato"
              value: "5"
            - label: "Domenica"
              value: "6"
    priority:
      name: Priorità
      description: Livello di priorità (più basso = maggiore priorità, 1 massima)
      required: false
      default: 99
      example: 10
      selector:
        number:
          min: 1
          max: 999
          mode: box

delete_config:
  name: Elimina Configurazione
  description: Elimina una configurazione esistente
  fields:
    entity_id:
      name: Entità
      description: Entità sensor.mia_config_* dell'istanza da utilizzare (opzionale, usa l'istanza di default se non specificato)
      required: false
      example: "sensor.mia_config_temperatura_target"
      selector:
        entity:
          integration: mia_config
    setup_name:
      name: Nome Configurazione
      description: Nome della configurazione da eliminare
      required: true
      example: "temperatura_target"
      selector:
        text:
    config_type:
      name: Tipo Configurazione
      description: Tipo di configurazione da eliminare
      required: false
      default: "all"
      example: "all"
      selector:
        select:
          options:
            - label: "Tutte"
              value: "all"
            - label: "Standard"
              value: "standard"
            - label: "A Tempo"
              value: "time"
            - label: "A Orario"
              value: "schedule"

get_configurations:
  name: Ottieni Configurazioni
  description: Recupera le configurazioni esistenti
  fields:
    entity_id:
      name: Entità
      description: Entità sensor.mia_config_* dell'istanza da utilizzare (opzionale, usa l'istanza di default se non specificato)
      required: false
      example: "sensor.mia_config_temperatura_target"
      selector:
        entity:
          integration: mia_config
    setup_name:
      name: Nome Configurazione
      description: Nome della configurazione (lascia vuoto per tutte)
      required: false
      example: "temperatura_target"
      selector:
        text:

force_refresh:
  name: Forza Refresh
  description: Forza il refresh dei valori e invalida le cache predittive
  fields:
    entity_id:
      name: Entità
      description: Entità sensor.mia_config_* dell'istanza da aggiornare (opzionale, se omesso aggiorna tutte)
      required: false
      example: "sensor.mia_config_temperatura_target"
      selector:
        entity:
          integration: mia_config

get_history:
  name: Ottieni Storico
  description: Recupera lo storico delle modifiche alle configurazioni
  fields:
    entity_id:
      name: Entità
      description: Entità sensor.mia_config_* dell'istanza da utilizzare (opzionale, usa l'istanza di default se non specificato)
      required: false
      example: "sensor.mia_config_temperatura_target"
      selector:
        entity:
          integration: mia_config
    setup_name:
      name: Nome Configurazione
      description: Nome della configurazione (lascia vuoto per tutte)
      required: false
      example: "temperatura_target"
      selector:
        text:
    limit:
      name: Limite Record
      description: Numero massimo di record da restituire
      required: false
      default: 50
      example: 100
      selector:
        number:
          min: 1
          max: 1000
          mode: box

cleanup_history:
  name: Pulisci Storico
  description: Elimina record vecchi dallo storico e limita il numero di entry per configurazione
  fields:
    entity_id:
      name: Entità
      description: Entità sensor.mia_config_* dell'istanza da utilizzare (opzionale, usa l'istanza di default se non specificato)
      required: false
      example: "sensor.mia_config_temperatura_target"
      selector:
        entity:
          integration: mia_config
    setup_name:
      name: Nome Configurazione
      description: Nome della configurazione (lascia vuoto per pulire tutte)
      required: false
      example: "temperatura_target"
      selector:
        text:
    retention_days:
      name: Giorni di Ritenzione
      description: Elimina record più vecchi di questo numero di giorni (ma mantieni sempre almeno min_entries_per_name)
      required: false
      default: 730
      example: 365
      selector:
        number:
          min: 1
          max: 3650
          mode: box
    max_entries_per_name:
      name: Massimo Entry per Nome
      description: Mantieni solo questo numero di entry più recenti per ogni configurazione
      required: false
      default: 100
      example: 50
      selector:
        number:
          min: 1
          max: 1000
          mode: box
    min_entries_per_name:
      name: Minimo Entry per Nome
      description: Mantieni sempre almeno questo numero di entry più recenti (anche se oltre retention_days)
      required: false
      default: 10
      example: 20
      selector:
        number:
          min: 1
          max: 500
          mode: box
simulate_schedule:
  name: Simula Configurazione Settimanale
  description: Simula la configurazione per un periodo di tempo specificato (usato per la vista settimanale)
  fields:
    entity_id:
      name: Entità
      description: Entità sensor.mia_config_* dell'istanza da utilizzare (opzionale)
      required: false
      example: "sensor.mia_config_temperatura_target"
      selector:
        entity:
          integration: mia_config
    setup_name:
      name: Nome Configurazione
      description: Nome della configurazione da simulare
      required: true
      example: "temperatura_target"
      selector:
        text:
    start_date:
      name: Data Inizio
      description: "Data e ora di inizio simulazione (default: ora corrente)"
      required: false
      selector:
        datetime:
    days:
      name: Numero Giorni
      description: Numero di giorni da simulare
      required: false
      default: 14
      example: 7
      selector:
        number:
          min: 1
          max: 30
          mode: box

enable_config:
  name: Abilita Configurazione
  description: Abilita una configurazione precedentemente disabilitata
  fields:
    entity_id:
      name: Entità
      description: Entità sensor.mia_config_* dell'istanza da utilizzare (opzionale)
      required: false
      example: "sensor.mia_config_temperatura_target"
      selector:
        entity:
          integration: mia_config
    config_type:
      name: Tipo Configurazione
      description: Tipo di configurazione (standard, time, schedule, conditional)
      required: true
      example: "schedule"
      selector:
        select:
          options:
            - "standard"
            - "time"
            - "schedule"
            - "conditional"
    config_id:
      name: ID Configurazione
      description: ID della configurazione da abilitare
      required: true
      example: 5
      selector:
        number:
          min: 1
          mode: box

disable_config:
  name: Disabilita Configurazione
  description: Disabilita temporaneamente una configurazione senza eliminarla
  fields:
    entity_id:
      name: Entità
      description: Entità sensor.mia_config_* dell'istanza da utilizzare (opzionale)
      required: false
      example: "sensor.mia_config_temperatura_target"
      selector:
        entity:
          integration: mia_config
    config_type:
      name: Tipo Configurazione
      description: Tipo di configurazione (standard, time, schedule, conditional)
      required: true
      example: "schedule"
      selector:
        select:
          options:
            - "standard"
            - "time"
            - "schedule"
            - "conditional"
    config_id:
      name: ID Configurazione
      description: ID della configurazione da disabilitare
      required: true
      example: 5
      selector:
        number:
          min: 1
          mode: box

backup_database:
  name: Backup Database
  description: Crea un backup del database mia_config
  fields:
    entity_id:
      name: Entità
      description: Entità sensor.mia_config_* dell'istanza da utilizzare (opzionale)
      required: false
      example: "sensor.mia_config_temperatura_target"
      selector:
        entity:
          integration: mia_config

restore_database:
  name: Ripristina Database
  description: Ripristina il database mia_config da un file di backup
  fields:
    entity_id:
      name: Entità
      description: Entità sensor.mia_config_* dell'istanza da utilizzare (opzionale)
      required: false
      example: "sensor.mia_config_temperatura_target"
      selector:
        entity:
          integration: mia_config
    backup_file:
      name: Percorso File Backup
      description: Percorso completo al file di backup da ripristinare
      required: true
      example: "/config/backups/mia_config/mia_config_backup_20260103_131500.db"
      selector:
        text:

list_backups:
  name: Elenca Backup
  description: Restituisce l'elenco dei backup locali disponibili
  fields:
    entity_id:
      name: Entità
      description: Entità sensor.mia_config_* dell'istanza da utilizzare (opzionale)
      required: false
      example: "sensor.mia_config_temperatura_target"
      selector:
        entity:
          integration: mia_config

delete_backup:
  name: Elimina Backup
  description: Elimina un singolo file di backup
  fields:
    entity_id:
      name: Entità
      description: Entità sensor.mia_config_* dell'istanza da utilizzare (opzionale)
      required: false
      example: "sensor.mia_config_temperatura_target"
      selector:
        entity:
          integration: mia_config
    file_name:
      name: Nome File
      description: Nome del file di backup da eliminare (come restituito da list_backups)
      required: true
      example: "mia_config_backup_20260103_131500.db"
      selector:
        text:

delete_all_backups:
  name: Elimina Tutti i Backup
  description: Rimuove tutti i file di backup locali creati dal componente
  fields:
    entity_id:
      name: Entità
      description: Entità sensor.mia_config_* dell'istanza da utilizzare (opzionale)
      required: false
      example: "sensor.mia_config_temperatura_target"
      selector:
        entity:
          integration: mia_config